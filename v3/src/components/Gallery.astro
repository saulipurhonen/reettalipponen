---
interface WorkItem {
  title?: string | null
  description?: string | null
  dimensions?: string | null
  year?: string | null
  materials?: string | null
  images?: Array<{
    image?: string | null
    thumbnail?: string | null
    alt?: string | null
  }> | null
}

interface Props {
  items: WorkItem[]
}

const { items } = Astro.props
---

<div class="divide-y divide-white/10">
  {
    items.map((work, workIndex) => (
      <div class="reveal py-12 first:pt-0">
        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">
          {work.images?.map((img) => (
            <button
              type="button"
              class="lightbox-trigger block cursor-pointer"
              data-src={img.image || ""}
              data-alt={img.alt || work.title || ""}
              data-group={`work-${workIndex}`}
            >
              <img
                src={img.thumbnail || img.image || ""}
                alt={img.alt || work.title || ""}
                class="w-full h-auto object-cover transition-opacity hover:opacity-80"
                loading="lazy"
              />
            </button>
          ))}
        </div>
        <div class="mt-4 space-y-1">
          {work.title && <p class="text-lg font-semibold">{work.title}</p>}
          {work.description && (
            <p class="text-sm text-gray-400">{work.description}</p>
          )}
          {work.dimensions && (
            <p class="text-sm text-gray-400">{work.dimensions}</p>
          )}
          {work.year && <p class="text-sm text-gray-400">{work.year}</p>}
          {work.materials && (
            <p class="text-sm text-gray-400">{work.materials}</p>
          )}
        </div>
      </div>
    ))
  }
</div>
